const chatBox = document.getElementById('chatBox');
const userInput = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');
const micBtn = document.getElementById('micBtn');
const languageSelect = document.getElementById('languageSelect');

let recognition;
let isListening = false;

// Simple FAQ answers (expand as needed)
const faq = {
  en: {
    "what is a browser": "A browser is like a window that lets you look at websites on the internet. Examples: Chrome, Firefox, Safari ЁЯМР",
    "why is my wifi not working": "Try turning off your Wi-Fi and router for a minute, then turn them back on. It's like giving your Wi-Fi a little nap ЁЯШ┤",
    "hello": "Hello! How can I help you today? ЁЯШК",
    "how to set up an email account": "To set up an email, you need to go to an email provider like Gmail, choose a username, and create a password. Simple, right? ЁЯУз",
    "how do i change my profile picture": "Go to settings > Profile > Change Picture, and upload your favorite photo! It's like changing your avatar in a game! ЁЯОо",
    "how can i reset my phone": "Go to settings > System > Reset options > Erase all data. But make sure you backup your stuff before! ЁЯФД",
    "what is a download": "A download is like getting a package from the internet to your phone or computer. ЁЯУж",
    "what is a website": "A website is like a book that you can read online. It contains pages with different information. ЁЯУЦ",
    "how to send an email": "Just open your email app, click 'Compose', write your message, and hit 'Send'. It's like writing a letter but faster! тЬЙя╕П",
    "what is a link": "A link is like a road that leads you from one place to another on the internet. ЁЯМН",
    "how to check internet speed": "You can check your internet speed by visiting websites like Speedtest. It's like checking how fast your car is going! ЁЯЪЧЁЯТи",
    "what is a password": "A password is like a secret code that keeps your online stuff safe, like a lock on a door. ЁЯФР",
    "how can i make a video call": "Open WhatsApp or Skype, tap the video call button, and choose someone to call. It's like having a face-to-face chat! ЁЯОе",
    "why is my phone slow": "Try closing unused apps and clearing storage. It's like cleaning your room to make space for new stuff! ЁЯз╣",
    "how can i update my apps": "Go to the app store, tap on 'Updates', and click 'Update All'. It's like giving your apps a makeover! ЁЯТЕ",
    "what is a browser cache": "Browser cache is like a storage box where your browser keeps old versions of websites to make them load faster. ЁЯУж",
    "how can i use whatsApp": "Open WhatsApp, tap on the chat icon, select a contact, and start typing. It's like texting your friend! ЁЯТм",
    "why isnтАЩt my wi-fi working": "Check if your Wi-Fi is on, restart the router, or check if other devices are connecting. ЁЯМР",
    "how can i change my username": "Go to your profile settings, tap 'Edit' and change your username. ItтАЩs like changing your nickname! ЁЯСд",
    "how do i log out of an account": "Go to settings > Account > Log Out. It's like closing the door behind you when you leave. ЁЯЪк",
  },
  hi: {
    "рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХреНрдпрд╛ рд╣реИ": "рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдПрдХ рдЦрд┐рдбрд╝рдХреА рдХреА рддрд░рд╣ рд╣реЛрддрд╛ рд╣реИ рдЬрд┐рд╕рд╕реЗ рдЖрдк рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рд╡реЗрдмрд╕рд╛рдЗрдЯреНрд╕ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред рдЬреИрд╕реЗ: Chrome, Firefox, Safari ЁЯМН",
    "рдореЗрд░рд╛ рд╡рд╛рдИрдлрд╛рдИ рдХрд╛рдо рдХреНрдпреЛрдВ рдирд╣реАрдВ рдХрд░ рд░рд╣рд╛": "рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдЖрдкрдХрд╛ рд╡рд╛рдИрдлрд╛рдИ рдЪрд╛рд▓реВ рд╣реИ, рд░рд╛рдЙрдЯрд░ рдХреЛ рд░реАрд╕реНрдЯрд╛рд░реНрдЯ рдХрд░реЗрдВ, рдпрд╛ рджреЗрдЦреЗрдВ рдХрд┐ рджреВрд╕рд░реЗ рдбрд┐рд╡рд╛рдЗрд╕ рдЬреБрдбрд╝ рд░рд╣реЗ рд╣реИрдВ рдпрд╛ рдирд╣реАрдВред ЁЯФД",
    "рдирдорд╕реНрддреЗ": "рдирдорд╕реНрддреЗ! рдореИрдВ рдЖрдкрдХреА рдХреИрд╕реЗ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдБ? ЁЯШК",
    "рдИрдореЗрд▓ рдЦрд╛рддрд╛ рдХреИрд╕реЗ рд╕реЗрдЯ рдХрд░реЗрдВ": "рдИрдореЗрд▓ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ Gmail рдЬреИрд╕реЗ рд╕рд░реНрд╡рд┐рд╕ рдкрд░ рдЬрд╛рдирд╛ рд╣реЛрдЧрд╛, рдПрдХ рдпреВрдЬрд╝рд░рдиреЗрдо рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛ред рдЖрд╕рд╛рди рд╣реИ рди? ЁЯУз",
    "рдкреНрд░реЛрдлрд╛рдЗрд▓ рдкрд┐рдХреНрдЪрд░ рдХреИрд╕реЗ рдмрджрд▓реЗрдВ": "рд╕реЗрдЯрд┐рдВрдЧреНрд╕ > рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ > рддрд╕реНрд╡реАрд░ рдмрджрд▓реЗрдВ, рдФрд░ рдЕрдкрдиреА рдкрд╕рдВрджреАрджрд╛ рддрд╕реНрд╡реАрд░ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ! ЁЯУ╕",
    "рдлреЛрди рд░рд┐рд╕реЗрдЯ рдХреИрд╕реЗ рдХрд░реЗрдВ": "рд╕реЗрдЯрд┐рдВрдЧреНрд╕ > рд╕рд┐рд╕реНрдЯрдо > рд░реАрд╕реЗрдЯ рд╡рд┐рдХрд▓реНрдк > рд╕рднреА рдбреЗрдЯрд╛ рд╣рдЯрд╛рдПрдВред рд▓реЗрдХрд┐рди рдкрд╣рд▓реЗ рдмреИрдХрдЕрдк рд▓реЗрдирд╛ рди рднреВрд▓реЗрдВ! ЁЯФД",
    "рдбрд╛рдЙрдирд▓реЛрдб рдХреНрдпрд╛ рд╣реИ": "рдбрд╛рдЙрдирд▓реЛрдб рдПрдХ рдкреИрдХреЗрдЬ рдЬреИрд╕рд╛ рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реЗ рдЖрдкрдХреЗ рдлреЛрди рдпрд╛ рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ рдЖрддрд╛ рд╣реИред ЁЯУж",
    "рд╡реЗрдмрд╕рд╛рдЗрдЯ рдХреНрдпрд╛ рд╣реИ": "рд╡реЗрдмрд╕рд╛рдЗрдЯ рдПрдХ рдХрд┐рддрд╛рдм рдХреА рддрд░рд╣ рд╣реЛрддреА рд╣реИ рдЬрд┐рд╕реЗ рдЖрдк рдСрдирд▓рд╛рдЗрди рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВред ЁЯУЪ",
    "рдИрдореЗрд▓ рдХреИрд╕реЗ рднреЗрдЬреЗрдВ": "рдмрд╕ рдЕрдкрдиреЗ рдИрдореЗрд▓ рдРрдк рдХреЛ рдЦреЛрд▓реЗрдВ, 'рдХрдВрдкреЛрдЬ' рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ, рд╕рдВрджреЗрд╢ рд▓рд┐рдЦреЗрдВ рдФрд░ 'рд╕реЗрдВрдб' рджрдмрд╛рдПрдВред тЬЙя╕П",
    "рд▓рд┐рдВрдХ рдХреНрдпрд╛ рд╣реИ": "рд▓рд┐рдВрдХ рдПрдХ рд░рд╛рд╕реНрддрд╛ рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдПрдХ рд╕реНрдерд╛рди рд╕реЗ рджреВрд╕рд░реЗ рд╕реНрдерд╛рди рдкрд░ рд▓реЗ рдЬрд╛рддрд╛ рд╣реИред ЁЯМН",
    "рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реНрдкреАрдб рдХреИрд╕реЗ рдЪреЗрдХ рдХрд░реЗрдВ": "рдЖрдк Speedtest рдЬреИрд╕реА рд╡реЗрдмрд╕рд╛рдЗрдЯ рдкрд░ рдЬрд╛рдХрд░ рдЕрдкрдиреА рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реНрдкреАрдб рдЪреЗрдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред ЁЯЪЧЁЯТи",
    "рдкрд╛рд╕рд╡рд░реНрдб рдХреНрдпрд╛ рд╣реИ": "рдкрд╛рд╕рд╡рд░реНрдб рдПрдХ рдЧреБрдкреНрдд рдХреЛрдб рдХреА рддрд░рд╣ рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЗ рдСрдирд▓рд╛рдЗрди рдбреЗрдЯрд╛ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░рдЦрддрд╛ рд╣реИ, рдЬреИрд╕реЗ рджрд░рд╡рд╛рдЬреЗ рдкрд░ рддрд╛рд▓рд╛ред ЁЯФТ",
    "рд╡реАрдбрд┐рдпреЛ рдХреЙрд▓ рдХреИрд╕реЗ рдХрд░реЗрдВ": "WhatsApp рдпрд╛ Skype рдЦреЛрд▓реЗрдВ, рд╡реАрдбрд┐рдпреЛ рдХреЙрд▓ рдмрдЯрди рджрдмрд╛рдПрдВ рдФрд░ рдХрд┐рд╕реА рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВред ЁЯОе",
    "рдореЗрд░рд╛ рдлреЛрди рдХреНрдпреЛрдВ рд╕реНрд▓реЛ рд╣реИ": "рдЖрдк рдмреЗрдорддрд▓рдм рдХреЗ рдРрдкреНрд╕ рдХреЛ рдмрдВрдж рдХрд░рдХреЗ рдФрд░ рд╕реНрдЯреЛрд░реЗрдЬ рдХреНрд▓рд┐рдпрд░ рдХрд░рдХреЗ рдЗрд╕реЗ рд╣рд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред ЁЯз╣",
    "рдПрдкреНрд╕ рдХреИрд╕реЗ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ": "рдПрдк рд╕реНрдЯреЛрд░ рдкрд░ рдЬрд╛рдПрдВ, 'рдЕрдкрдбреЗрдЯреНрд╕' рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ 'рдЕрдкрдбреЗрдЯ рдСрд▓' рджрдмрд╛рдПрдВред ЁЯУ▒",
    "рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХреИрд╢ рдХреНрдпрд╛ рд╣реИ": "рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХреИрд╢ рд╡рд╣ рдЬрдЧрд╣ рд╣реЛрддреА рд╣реИ рдЬрд╣рд╛рдБ рдЖрдкрдХрд╛ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рд╡реЗрдмрд╕рд╛рдЗрдЯреНрд╕ рдХреЗ рдкреБрд░рд╛рдиреЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреЛ рд░рдЦрддрд╛ рд╣реИ рддрд╛рдХрд┐ рд╡реЗ рдЬрд▓реНрджреА рд▓реЛрдб рд╣реЛ рд╕рдХреЗрдВред ЁЯЧВя╕П",
    "рд╡реНрд╣рд╛рдЯреНрд╕рдПрдк рдХреИрд╕реЗ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░реЗрдВрдВ": "WhatsApp рдЦреЛрд▓реЗрдВ, рдЪреИрдЯ рдЖрдЗрдХрди рджрдмрд╛рдПрдВ, рд╕рдВрдкрд░реНрдХ рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ рдФрд░ рд╕рдВрджреЗрд╢ рд▓рд┐рдЦреЗрдВред ЁЯТм",
    "рд╡рд╛рдИрдлрд╛рдИ рдХреНрдпреЛрдВ рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд░рд╣рд╛": "рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдЖрдкрдХрд╛ рд╡рд╛рдИрдлрд╛рдИ рдСрди рд╣реИ, рд░рд╛рдЙрдЯрд░ рдХреЛ рд░реАрд╕реНрдЯрд╛рд░реНрдЯ рдХрд░реЗрдВ, рдпрд╛ рджреЗрдЦреЗрдВ рдХрд┐ рдЕрдиреНрдп рдбрд┐рд╡рд╛рдЗрд╕ рдХрдиреЗрдХреНрдЯ рд╣реЛ рд░рд╣реЗ рд╣реИрдВ рдпрд╛ рдирд╣реАрдВред ЁЯМР",
    "рдпреВрдЬрд╝рд░рдиреЗрдо рдХреИрд╕реЗ рдмрджрд▓реЗрдВ": "рдЕрдкрдиреЗ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдореЗрдВ рдЬрд╛рдПрдВ, 'рдПрдбрд┐рдЯ' рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ рдЕрдкрдирд╛ рдпреВрдЬрд╝рд░рдиреЗрдо рдмрджрд▓реЗрдВред ЁЯСд",
    "рдПрдХрд╛рдЙрдВрдЯ рд╕реЗ рд▓реЙрдЧ рдЖрдЙрдЯ рдХреИрд╕реЗ рдХрд░реЗрдВ": "рд╕реЗрдЯрд┐рдВрдЧреНрд╕ > рдЕрдХрд╛рдЙрдВрдЯ > рд▓реЙрдЧ рдЖрдЙрдЯ рдкрд░ рдЬрд╛рдПрдВред ЁЯЪк",
  },
  hinglish: {
    "рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХреНрдпрд╛ рд╣реИ": "Browser ek window ki tarah hota hai, jisme aap internet par websites dekh sakte ho. Jaise Chrome, Firefox, Safari ЁЯМН, Using this will allow you to do jagat panchayti",
    "рдореЗрд░рд╛ wifi рдХрд╛рдо рдХреНрдпреЛрдВ рдирд╣реАрдВ рдХрд░ рд░рд╣рд╛ рд╣реИ": "Check karo ki aapka wifi on hai, router ko restart karo, ya dekho ki dusre devices connect ho rahe hain ya nahi. ЁЯФД",
    "рдирдорд╕реНрддреЗ": "Hello! Main aapki kaise madad kar sakti hoon? ЁЯШК",
    "рдИрдореЗрд▓ рдЦрд╛рддрд╛ рдХреИрд╕реЗ рд╕реЗрдЯ рдХрд░реЗрдВ": "Email setup karne ke liye, Gmail jaise provider par jao, ek username choose karo, aur password banao. Bas, ho gaya! ЁЯУз",
    "рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдкрд┐рдХреНрдЪрд░ рдХреИрд╕реЗ рдмрджрд▓реЗрдВ": "Settings > Profile > Change Picture par jao, aur apni pasand ki photo upload karo! ЁЯУ╕",
    "рдлреЛрди рд░рд┐рд╕реЗрдЯ рдХреИрд╕реЗ рдХрд░реЗрдВ": "Settings > System > Reset options > Erase all data. Par pehle apna data backup kar lo! ЁЯФД",
    "рдбрд╛рдЙрдирд▓реЛрдб рдХреНрдпрд╛ рд╣реИ": "Download ek package hota hai jo internet se aapke phone ya computer pe aata hai. ЁЯУж",
    "рд╡реЗрдмрд╕рд╛рдЗрдЯ рдХреНрдпрд╛ рд╣реИ": "Website ek book ki tarah hoti hai, jisme alag-alag pages hote hain. ЁЯУЪ",
    "рдИрдореЗрд▓ рдХреИрд╕реЗ рднреЗрдЬреЗрдВ": "Bas apne email app ko kholo, 'Compose' par click karo, message likho aur 'Send' dabao! тЬЙя╕П",
    "рд▓рд┐рдВрдХ рдХреНрдпрд╛ рд╣реИ": "Link ek rasta hota hai jo aapko internet par ek jagah se doosri jagah le jata hai. ЁЯМН",
    "рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реНрдкреАрдб рдХреИрд╕реЗ рдЪреЗрдХ рдХрд░реЗрдВ": "Speedtest website par jao aur apni internet speed check karo! ЁЯЪЧЁЯТи",
    "рдкрд╛рд╕рд╡рд░реНрдб рдХреНрдпрд╛ рд╣реИ": "Password ek secret code hota hai jo aapke online data ko safe rakhta hai. ЁЯФР",
    "рд╡реАрдбрд┐рдпреЛ рдХреЙрд▓ рдХреИрд╕реЗ рдХрд░реЗрдВ": "WhatsApp ya Skype kholo, video call button dabao, aur kisi ko call karo! ЁЯОе",
    "рдореЗрд░рд╛ рдлреЛрди рдХреНрдпреЛрдВ рд╕реНрд▓реЛ рд╣реИ": "Be-reh apps band kar lo aur storage clear kar lo. Jaise apna kamra safai kar rahe ho! ЁЯз╣",
    "рдПрдкреНрд╕ рдХреИрд╕реЗ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ": "App store me jao, 'Updates' par click karo, aur 'Update All' dabao! ЁЯУ▒",
    "рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдХреИрд╢ рдХреНрдпрд╛ рд╣реИ": "Browser cache ek storage box hota hai jahan aapka browser purani website versions rakhta hai taaki website jaldi load ho. ЁЯЧВя╕П",
    "whatsApp рдХреИрд╕реЗ use рдХрд░реЗрдВ": "WhatsApp kholo, chat icon dabao, contact select karo aur message likho! ЁЯТм",
    "рд╡рд╛рдИрдлрд╛рдИ рдХреНрдпреЛрдВ рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд░рд╣рд╛": "Check karo ki aapka wifi on hai, router ko restart karo, ya dekho ki dusre devices connect ho rahe hain ya nahi. ЁЯМР",
    "рдпреВрдЬрд╝рд░рдиреЗрдо рдХреИрд╕реЗ change рдХрд░реЗрдВ": "Profile settings me jaa kar, 'Edit' pe click karo aur apna username change karo! ЁЯСд",
    "рдПрдХрд╛рдЙрдВрдЯ рд╕реЗ log out рдХреИрд╕реЗ рдХрд░реЗрдВ": "Settings > Account > Log Out pe jao. ЁЯЪк",
  }
};

// Add message to chat
function addMessage(message, isUser = false) {
  const div = document.createElement('div');
  div.className = isUser ? 'user-message' : 'bot-message';
  div.textContent = message;
  chatBox.appendChild(div);
  chatBox.scrollTop = chatBox.scrollTop + 100;
}

// Get answer from FAQ with exact string matching
function getAnswer(question, lang) {
  question = question.toLowerCase().trim(); // Normalize input

  // Check for an exact match first
  for (const key in faq[lang]) {
    if (question === key.toLowerCase().trim()) {
      return faq[lang][key];
    }
  }

  // If no exact match, fall back to the keyword matching
  for (const key in faq[lang]) {
    if (question.includes(key.toLowerCase().trim())) {
      return faq[lang][key];
    }
  }

  // If no match is found, return a default message
  return lang === 'en' ? "Sorry, I don't understand. Can you rephrase?" :
         lang === 'hi' ? "рдорд╛рдлрд╝ рдХреАрдЬрд┐рдП, рдореИрдВ рд╕рдордЭ рдирд╣реАрдВ рдкрд╛рдпрд╛ред рдХреГрдкрдпрд╛ рджреЛрдмрд╛рд░рд╛ рдмрддрд╛рдПрдВред" :
         "Sorry, samajh nahi aaya, Mere pass OpenAI ka subscription nahi hai, please baat samjho";
}

// Handle user input
function handleInput() {
  const text = userInput.value;
  if (!text) return;
  const lang = languageSelect.value;
  addMessage(text, true);
  userInput.value = '';
  const answer = getAnswer(text, lang);
  addMessage(answer);
  speak(answer, lang);
}

// Function to remove emojis from the text
function removeEmojis(text) {
  return text.replace(/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F700}-\u{1F77F}\u{1F780}-\u{1F7FF}\u{1F800}-\u{1F8FF}\u{1F900}-\u{1F9FF}\u{1FA00}-\u{1FA6F}\u{1FA70}-\u{1FAFF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u{2300}-\u{23FF}\u{2B50}\u{1F004}-\u{1F0CF}\u{1F3C0}-\u{1F3FF}\u{1F004}-\u{1F0CF}\u{1F600}-\u{1F64F}]/gu, '');
}

// Speak the answer
function speak(text, lang) {
  // Remove emojis before speaking
  const cleanText = removeEmojis(text);

  if ('speechSynthesis' in window) {
    const utterance = new SpeechSynthesisUtterance(cleanText);
    utterance.lang = lang === 'en' ? 'en-US' : 'hi-IN';
    window.speechSynthesis.speak(utterance);
  }
}

// Initialize speech recognition
function initSpeechRecognition() {
  recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
  recognition.lang = languageSelect.value === 'en' ? 'en-US' : 'hi-IN';
  recognition.interimResults = false;
  recognition.onresult = (event) => {
    const transcript = event.results[0][0].transcript;
    userInput.value = transcript;
    handleInput();
  };
  recognition.onerror = (event) => {
    console.error('Speech recognition error', event.error);
  };
  recognition.onend = () => {
    isListening = false;
    micBtn.textContent = 'ЁЯОд Speak';
  };
}

// Toggle speech recognition
micBtn.addEventListener('click', () => {
  if (!isListening) {
    initSpeechRecognition();
    recognition.start();
    isListening = true;
    micBtn.textContent = 'Listening...';
  } else {
    recognition.stop();
    isListening = false;
    micBtn.textContent = 'ЁЯОд Speak';
  }
});

// Send on button click or Enter
sendBtn.addEventListener('click', handleInput);
userInput.addEventListener('keypress', (e) => {
  if (e.key === 'Enter') handleInput();
});

// Initial greeting
addMessage("Hello! How can I help you today?");
